# PostgreSQL Primary Configuration for QuantumHarmony
# Optimized for KYC document storage with replication

# Connection Settings
listen_addresses = '*'
port = 5432
max_connections = 100

# Memory Settings
shared_buffers = 256MB
effective_cache_size = 768MB
work_mem = 16MB
maintenance_work_mem = 128MB

# WAL Settings (for replication)
wal_level = replica
max_wal_senders = 5
wal_keep_size = 1GB
max_replication_slots = 5
hot_standby = on

# Synchronous Replication (optional - enable for strong consistency)
# synchronous_commit = on
# synchronous_standby_names = 'alice,charlie'

# Logging
logging_collector = on
log_directory = 'pg_log'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
log_statement = 'ddl'
log_connections = on
log_disconnections = on

# Security
ssl = off  # Enable in production with proper certs
password_encryption = scram-sha-256

# Performance
random_page_cost = 1.1
effective_io_concurrency = 200
default_statistics_target = 100

# Checkpoints
checkpoint_completion_target = 0.9
checkpoint_timeout = 10min
max_wal_size = 2GB
min_wal_size = 1GB

# Background Writer
bgwriter_delay = 200ms
bgwriter_lru_maxpages = 100
bgwriter_lru_multiplier = 2.0
